{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Reis da Torre{% endblock %} | eSports</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jaro:opsz@6..72&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="{% static 'app_eSports\img\Logo_Equipe_Reis_da_Torre\favicon.svg' %}" type="image/x-icon">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <link rel="stylesheet" href="{% static 'app_eSports/css/style.css' %}">
</head>
<body>
    <header>
        <nav>
            <a href="{% url 'home' %}" class="logo">
                <img class="img" src="{% static 'app_eSports\img\Logo_Equipe_Reis_da_Torre\Logo Equipe Reis da Torre.svg' %}" alt="Logo eSports">
            </a>
            <!--Adicionando menu quando necessário-->
            <div class="menu-toggle" id="menu-toggle">
                <i class="fas fa-bars"></i>
            </div>
            
            <ul class="nav-links"> 
                <li><a href="{% url 'home' %}">Início</a></li>
                <li><a href="{% url 'noticias_lista' %}">Notícias</a></li>
                <li><a href="{% url 'loja' %}">Loja</a></li>
                <li><a href="{% url 'transmissao' %}">Transmissão</a></li>
                <li><a href="{% url 'agenda' %}">Agenda</a></li>
                <li><a href="{% url 'classificacao_csi' %}">CSI</a></li>
                <li><a href="{% url 'sobre' %}">Sobre</a></li> 
            </ul>

            <div class="header-icons">
                
                <div class="search-container"> 
                    <form action="{% url 'pesquisa' %}" method="get" class="search-form" id="search-form">
                        <input type="text" name="q" placeholder="Pesquisar..." class="search-input">
                        <button type="submit" class="search-submit"><i class="fas fa-search"></i></button> 
                    </form>
                    <a href="#" id="search-toggle" class="search-toggle-icon" title="Pesquisar"><i class="fas fa-search"></i></a>
                </div>
                {% if user.is_authenticated %}
                    <a href="{% url 'perfil' %}" title="Meu Perfil"><i class="fas fa-user"></i></a>
                {% else %}
                    <a href="{% url 'login' %}" title="Login/Cadastro"><i class="fas fa-user"></i></a>
                {% endif %}
                
                <a href="{% url 'carrinho' %}" title="Carrinho"><i class="fas fa-shopping-bag"></i></a>
            </div>
        </nav>
    </header>

    <main>
        {% block content %}
        {% endblock %}
    </main>

<footer>
        <div class="container footer-content"> {# Container principal do grid #}
            {# Coluna 1: Logo #}
            <div class="footer-col footer-col-logo">
                <img src="{% static 'app_eSports\img\Logo_Equipe_Reis_da_Torre\Logo Equipe Reis da Torre.svg' %}" alt="Logo eSports" class="logo-footer">
            </div>
            
            {# Coluna 2: Termos e Políticas + Ícones Sociais #}
            <div class="footer-col">
                <h4>TERMOS E POLÍTICAS</h4>
                <ul>
                    <li><a href="#">Política de Reembolso</a></li>
                    <li><a href="#">Política de Frete</a></li>
                    <li><a href="#">Política de Privacidade</a></li>
                </ul>
                {# Ícones sociais podem vir aqui ou na próxima coluna #}
                 <div class="social-icons" style="margin-top: 1.5rem;"> 
                    <a href="#" aria-label="Twitter"><i class="fa-brands fa-x-twitter"></i></a>
                    <a href="#" aria-label="Instagram"><i class="fa-brands fa-instagram"></i></a>
                    <a href="#" aria-label="Tiktok"><i class="fa-brands fa-tiktok"></i></a>
                    <a href="#" aria-label="Youtube"><i class="fa-brands fa-youtube"></i></a>
                </div>
            </div>

            {# Coluna 3: Links Redes Sociais (Opcional, pode remover se os ícones bastam) #}
            <div class="footer-col">
                <h4>Redes Sociais</h4>
                <ul>
                    <li><a href="#">Twitter</a></li>
                    <li><a href="#">Instagram</a></li>
                    <li><a href="#">Tiktok</a></li>
                    <li><a href="#">Youtube</a></li>
                </ul>
            </div>
        </div>

        {# Bloco de Estatísticas - Separado do grid principal #}
        <div class="site-stats container">
            <span class="stat-item-footer"><i class="fas fa-users"></i> Usuários: {{ total_users }}</span>
            <span class="stat-item-footer"><i class="fas fa-eye"></i> Visitas: {{ total_visits }}</span>
        </div>

        {# Copyright - Separado e centralizado #}
        <div class="copyright">
            <p>© Copyright REIS DA TORRE 2025 Todos os direitos reservados</p>
        </div>
    </footer>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const searchContainer = document.querySelector('.search-container');
        const searchToggle = document.getElementById('search-toggle');
        const searchForm = document.getElementById('search-form');
        const searchInput = searchForm.querySelector('.search-input');
        
        // --- NOVO: Lógica do Menu Mobile ---
        const menuToggle = document.getElementById('menu-toggle');
        const nav = document.querySelector('header nav');

        if (menuToggle && nav) {
            menuToggle.addEventListener('click', () => {
                nav.classList.toggle('menu-open');
                
                // Opcional: Altera o ícone de hambúrguer (fa-bars) para X (fa-times)
                const toggleIcon = menuToggle.querySelector('i');
                if (nav.classList.contains('menu-open')) {
                    toggleIcon.classList.remove('fa-bars');
                    toggleIcon.classList.add('fa-times');
                } else {
                    toggleIcon.classList.remove('fa-times');
                    toggleIcon.classList.add('fa-bars');
                }
                
                // Fecha a pesquisa se o menu principal for aberto (opcional)
                if (searchContainer && searchContainer.classList.contains('active')) {
                     searchContainer.classList.remove('active');
                }
            });
        }
        
        // --- Lógica do Formulário de Pesquisa (Adaptada) ---
        if (searchToggle && searchForm && searchContainer) { 
            searchToggle.addEventListener('click', (e) => {
                e.preventDefault(); 
                
                // Verifica se está em mobile (menu-open) e se sim, não abre o search toggle de desktop
                if (window.innerWidth > 900) { 
                    searchContainer.classList.toggle('active'); 
                    
                    if (searchContainer.classList.contains('active')) {
                        setTimeout(() => searchInput.focus(), 100); 
                    } else {
                         searchInput.value = ''; 
                    }
                }
                // Em mobile, o campo de busca sempre fica visível dentro do menu-open, então o toggle não faz nada.
            });
        }
        
        // Fecha se clicar fora (Desktop Search)
        document.addEventListener('click', (e) => {
            if (window.innerWidth > 900 && searchContainer && !searchContainer.contains(e.target) && searchContainer.classList.contains('active')) {
                 searchContainer.classList.remove('active');
                 searchInput.value = '';
            }
        });
        
        // Fecha o menu principal se o usuário clicar em um link (para uma SPA/site de página única)
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                if (nav.classList.contains('menu-open')) {
                    nav.classList.remove('menu-open');
                    menuToggle.querySelector('i').classList.remove('fa-times');
                    menuToggle.querySelector('i').classList.add('fa-bars');
                }
            });
        });
    });
</script>
    
    
</body>
</html>
