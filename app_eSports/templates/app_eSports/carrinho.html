{% extends 'app_eSports/base.html' %}
{% load static %}

{% block title %}Seu Carrinho{% endblock %}

{% block content %}
<main class="cart-wrap">
    <div class="cart-container">

        <section class="cart-items-section">
            <h2 style="font-size: 2.5rem; margin-bottom: 2rem;">Seu Carrinho</h2>
            
            {% if produtos_com_detalhes %}
                <ul class="cart-items-list">
                    {% for item in produtos_com_detalhes %}
                    <li class="cart-item">
                        {% if item.imagem %}
                        <img src="{{ item.imagem.imagem.url }}" alt="{{ item.produto.nome }}" class="cart-item-img">
                        {% else %}
                        <img src="{% static 'app_eSports/images/placeholder.jpg' %}" alt="Produto" class="cart-item-img">
                        {% endif %}
                        
                        <div class="cart-item-info">
                            <h3>{{ item.produto.nome }}</h3>
                            <p style="color: var(--cor-dourado-brilhante); font-weight: bold;">{{ item.variacao.nome }}</p>
                            <p>R$ {{ item.variacao.preco }}</p>
                            <p>Qtd: {{ item.quantidade }}</p>
                        </div>
                        
                        <div class="cart-item-total">
                            <strong>R$ {{ item.subtotal }}</strong>
                        </div>
                        
                        <a href="{% url 'remover_do_carrinho' item.variacao.id %}" class="cart-remove-btn" title="Remover item">x</a>
                    </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p style="text-align: center; font-size: 1.2rem;">Seu carrinho est√° vazio.</p>
                <a href="{% url 'loja' %}" class="btn" style="margin-top: 1.5rem;">Ver Produtos</a>
            {% endif %}
        </section>

        {% if produtos_com_detalhes %}
        <aside class="cart-summary">
            <h2 style="font-size: 2rem;">Resumo</h2>
            <div class="cart-summary-row">
                <span>Subtotal</span>
                <strong>R$ {{ total_carrinho }}</strong>
            </div>
            <div class="cart-summary-row cart-total-row">
                <span>Total</span>
                <strong>R$ {{ total_carrinho }}</strong>
            </div>
            <a href="#" class="btn btn-checkout">Finalizar Compra</a>
        </aside>
        {% endif %}

    </div>
</main>
{% endblock %}